---
title: 'Status of California Scorpionfish (*Scorpaena guttata*) Off Southern California in 2017'
author: ''
date: ''
output:
  pdf_document:
    fig_caption: yes
    highlight: haddock
    includes:
      before_body: Titlepage.tex
      in_header: header.tex
    keep_tex: yes
    template: Default_template_modified.tex
    number_sections: yes
    toc: yes
    toc_depth: 4
  html_document:
    toc: yes
  word_document: default
documentclass: article
fontsize: 12pt
geometry: margin=1in
csl: CJFAS.csl
bibliography: BibFile.bib
link-citations: yes
---
```{r global_options, include=FALSE}
    # set global options for R code chunks: echo=FALSE (don't include source code); 
    # warning=FALSE (suppress R warnings); message=FALSE (suppress R messages)
    # eval = TRUE is default
    knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
```

```{r}
    # Read in preamble R code - including required libraries and the SS file(s)
    source('./Rcode/Preamble.R')
 
    # Read in data/manipulations for executive summary tables and figures
    # It may take time to edit this file and get it ready for your assessment
    # Make small changes in this file and then try to compile the document
    # Commit when you have a success!
    source('./Rcode/Exec_summary_figs_tables.R')
```
\setlength{\parskip}{5mm plus1mm minus1mm}
\pagebreak

\pagenumbering{arabic}
\setcounter{page}{1}
\renewcommand{\thefigure}{\alph{figure}}
\renewcommand{\thetable}{\alph{table}}



#Executive Summary{-}

##Stock{-}


This assessment reports the status of the `r spp` (\emph{`r spp.sci`}) resource 
in U.S. waters off the coast of the California, Oregon, and Washington using data 
through `r LastYR`.  Etc...




##Catches{-}


Catch figure(s) with fleets: (Figures \ref{fig:Exec_catch1}-\ref{fig:Exec_catch3})    
Catch table:                 (Table \ref{tab:Exec_catch})







\FloatBarrier

<!-- ***********BEGIN EXECUTIVE SUMMARY CATCH FIGURES AND TABLES*********** -->
<!-- ***********Edit the Plot_catch tables and captions******************** -->
<!-- ***********This depends on how many plots you need******************** -->
<!-- ***********Also included is the r4SS plot - keep or remove************ -->
<!-- ***********CATCH FIGURES********************************************** -->
```{r, fig.cap= paste(spp, 'landings history for the recreational fleets. \\label{fig:Exec_catch1}',sep=' ')}
    # CSV: './txt_files/Exec_catch_for_figs.csv'
    # Note: you cannot have carriage returns in the R options line
    # Plot washington catches           
    Plot_catch(Catch_df = Exec_region1_catch)
```

```{r, fig.cap=paste('Stacked line plot of', spp,' landings history for the commercial fleets. \\label{fig:Exec_catch2}',sep=' ')}
    # Plot Oregon catches
    Plot_catch(Catch_df = Exec_region2_catch)
```

```{r, fig.cap=paste('Stacked line plot of', spp, 'landings history by region, north of Pt. Conception, between Pt. Conception and the U.S.-Mexico border, and Mexican waters. \\label{fig:Exec_catch3}',sep=' ')}
     # Plot California catches  
      Plot_catch(Catch_df = Exec_region3_catch)
```

\FloatBarrier

![Landings history of `r spp` in the `r mod1_label`. \label{fig:r4ss_catches}](r4ss/plots_mod1/catch2 landings stacked.png)





<!-- ***********CATCH TABLE************************************************ -->
```{r, results='asis'}
    #CSV: './txt_files/Exec_catch_summary.csv'
    # Catch table section in R_exec_summary_fig_tables.R
    # Print the table
    print(Exec_catch.table, include.rownames = FALSE, caption.placement = 'top')
```
<!-- ***********END EXECUTIVE SUMMARY CATCH FIGURES AND TABLES************* -->



\FloatBarrier




\newpage

##Data and Assessment{-}

`r spp` was assessed in 2005 [@Maunder2005] using Stock Synthesis II version 1.18. 
This assessment uses the newest version of Stock Synthesis (3.30.0.4).  The model 
begins in `r Dat_start_mod1`, and assumes the stock 
was at an unfished equilibrium that year.


Map of assessment region: (Figure \ref{fig:assess_region_map}).  
 
![Map depicting the boundaries for the base-case model.  \label{fig:assess_region_map}](Figures/assess_region_map.png)

\FloatBarrier


##Stock Biomass{-}

Spawning output Figure:    Figure \ref{fig:Spawnbio_all}     
Spawning output Table(s):  Table \ref{tab:SpawningDeplete_mod1}     
Relative depletion Figure: Figure \ref{fig:RelDeplete_all}     

 
The estimated relative depletion level (spawning output relative to unfished 
spawning output) of the the base-case model in `r LastYR` is `r Depl_mod1` 
(~95% asymptotic interval: $\pm$ `r Depl_mod1_CI`) (Figure \ref{fig:RelDeplete_all}).



\FloatBarrier


<!--BEGIN  EXECUTIVE SUMMARY SPAWNING BIOMASS AND DEPLETE TABLES AND FIGURES-->
```{r, results='asis'}
    # Print spawning biomass table(s)
    print(Spawn_Deplete_mod1.table, include.rownames = FALSE, caption.placement = 'top')
    
    # Select which file to use for the recuitment figure, depending on if you have one model or multiple models
      spawn.file  = ifelse(fecund=='numbers',
                           'r4ss/plots_mod1/ts7_Spawning_output_with_95_asymptotic_intervals_intervals.png',
                           'r4ss/plots_mod1/ts7_Spawning_biomass_(mt)_with_95_asymptotic_intervals_intervals.png')
      Bratio.file = 'r4ss/plots_mod1/ts9_Spawning_depletion_with_95_asymptotic_intervals_intervals.png' 
```

\FloatBarrier


![Time series of spawning output trajectory (circles and line: median; light broken lines: 95% credibility intervals) for the base case assessment model.  \label{fig:Spawnbio_all}](`r spawn.file`)

![Estimated relative depletion with approximate 95\% asymptotic confidnce intervals (dashed lines) for the base case assessment model. \label{fig:RelDeplete_all}](`r Bratio.file`)

<!-- ***********END  EXECUTIVE SUMMARY SPAWNING BIOMASS AND**************** -->


<!-- ***********DEPLETION TABLES AND FIGURES******************************* -->

\FloatBarrier



##Recruitment{-}

Recruitment Figure: (Figure \ref{fig:Recruits_all})     
Recruitment Tables: (Tables \ref{tab:Recruit_mod1}, \ref{tab:Recruit_mod2} 
and \ref{tab:Recruit_mod3})



<!-- ***********BEGIN EXECUTIVE SUMMARY RECRUITMENT TABLES AND FIGURES***** -->
```{r, results='asis'}
   # Print recruitment tables; will print up to 3 depending on the number of models, you can delete the code
   # for models you don't need as well
   print(Recruit_mod1.table, include.rownames = FALSE, caption.placement = 'top')
   
   # select which file to use for the recuitment figure, depending on if you have one model or multiple models
   
     recruit.file  = 'r4ss/plots_mod1/ts11_Age-0_recruits_(1000s)_with_95_asymptotic_intervals.png'
    
```

\FloatBarrier

![Time series of estimated `r spp` recruitments for the base-case model with 95\% confidence or credibility intervals. \label{fig:Recruits_all}](`r recruit.file`)

<!-- ***********END EXECUTIVE SUMMARY RECRUITMENT TABLEs AND FIGURES******* -->

 \FloatBarrier



##Exploitation status{-}


Exploitation Tables: Table \ref{tab:SPR_Exploit_mod1}, Table \ref{tab:SPR_Exploit_mod2}, Table \ref{tab:SPR_Exploit_mod3}
Exploitation Figure: Figure \ref{fig:SPR_all}). 

A summary of `r spp` exploitation histories for base model is provided as Figure \ref{fig:Phase_all}.


\FloatBarrier

<!-- ***********BEGIN EXECUTIVE SUMMARY EXPLOITATION AND******************* -->
<!-- ***********SPRratio TABLE AND FIGURES********************************* -->
```{r, results='asis'}
   # Print exploitation and SPRratio tables depending on how many models there are
   
     print(SPRratio_Exploit_mod1.table, include.rownames = FALSE, caption.placement = 'top')
   
   # select the files for the SPR and phase plots depending on the number of models
   
     SPR.file   = 'r4ss/plots_mod1/SPR3_ratiointerval.png'
     Phase.file = 'r4ss/plots_mod1/SPR4_phase.png' 
   
```

\FloatBarrier

![Estimated spawning potential ratio (SPR) for the base-case model. One minus SPR is plotted so that higher exploitation rates occur on the upper portion of the y-axis. The management target is plotted as a red horizontal line and values above this reflect harvests in excess of the overfishing proxy based on the SPR\textsubscript{50\%} harvest rate. The last year in the time series is `r Dat_end_mod1`. \label{fig:SPR_all}](`r SPR.file`)


![Phase plot of estimated relative (1-SPR) vs. relative spawning biomass for the base case model. The relative (1-SPR) is (1-SPR) divided by 50\% (the SPR target). Relative depletion is the annual spawning biomass divided by the unfished spawning biomass. \label{fig:Phase_all}](`r Phase.file`)

<!-- ************END EXECUTIVE SUMMARY EXPLOITATION************************ -->
<!-- ************AND SPRratio TABLE AND FIGURES**************************** -->

\FloatBarrier




##Ecosystem Considerations{-}
In this assessment, ecosystem considerations were.....




##Reference Points{-}

This stock assessment estimates that `r spp` in the `r mod1_label` are 
`r ifelse(Deplete_mod1[nrow(Deplete_mod1),2]-MT>0,"above","below")` the biomass 
target, but `r ifelse(Deplete_mod1[nrow(Deplete_mod1),2]-MSST>0,"above","below")` 
the minimum stock size threshold.  \hl{Add sentence about spawning output trend.} 
The estimated relative depletion level for \hl{Model 1} in `r LastYR` is 
`r Depl_mod1` (~95% asymptotic interval: $\pm$ `r Depl_mod1_CI`, corresponding 
to an unfished spawning output of `r paste(Spawn_mod1, fecund_unit,sep=' ')` 
(~95% asymptotic interval: `r paste(Spawn_mod1_CI, fecund_unit, sep=' ')`) of 
spawning output in the base model (Table \ref{tab:Ref_pts_mod1}).  Unfished 
age `r min_age` biomass was estimated to be `r Ref_pts_mod1[2,2]` mt in the 
base case model. The target spawning output based on the biomass target 
($SB_{40\%}$) is `r paste(Ref_pts_mod1[7,2], fecund_unit,sep=' ')`, which gives 
a catch of `r Ref_pts_mod1[10,2]` mt. Equilibrium yield at the proxy $F_{MSY}$ 
harvest rate corresponding to $SPR_{50\%}$ is `r Ref_pts_mod1[15,2]` mt.


\FloatBarrier

<!-- ***********BEGIN EXECUTIVE SUMMARY REFERENCE POINT TABLES************* -->
```{r, results='asis'}
   # Print reference point tables
  
     print(Ref_pts_mod1.table, include.rownames = FALSE, caption.placement = 'top',
           sanitize.text.function = function(x){x})
   
```
<!-- ***********END EXECUTIVE SUMMARY REFERENCE POINT TABLES*************** --> 

\FloatBarrier




##Management Performance{-}


Management performance table: Table \ref{tab:mnmgt_perform}


<!-- ***********BEGIN EXECUTIVE SUMMARY MANAGEMENT PERFORMANCE TABLE******* --> 
```{r, results='asis'}
    # Print management performance table - will have to edit the text file and 
    # R code for this table
    # Edit file: './txt_files/Exec_mngmt_performance.csv'
    print(mngmnt.table, include.rownames = FALSE, caption.placement = 'top', 
          sanitize.text.function = function(x){x}, scalebox = .9)
```
<!-- ***********END EXECUTIVE SUMMARY MANAGEMENT PERFORMANCE TABLE********* -->




##Unresolved Problems And Major Uncertainties{-}
   TBD after STAR panel

\FloatBarrier




##Decision Table(s) (groundfish only){-}    

OFL projection table: Table \ref{tab:OFL_projection}    

Decision table(s) Table \ref{tab:Decision_table_mod1}, 
                  Table \ref{tab:Decision_table_mod2}, 
                  Table \ref{tab:Decision_table_mod3}
 
    Yield curve: Figure \ref{fig:Yield_all}

<!-- ***********BEGIN EXECUTIVE SUMMARY OFL AND DECISION TABLES************ -->
```{r, results='asis'}   
    # Print OFL table 
      print(OFL.table, include.rownames = FALSE, caption.placement = 'top')

   # Decision tables currently read in as txt files and will need to be changed
   # Decision table text set up for alternate states of natural mortality, but 
   # the text can be changed in the Decision Table section of the R file, 
   # R_exec_summary_figs_tables.R
   # Edit text file(s): ./txt_files/DecisionTable_mod1 ,  
   # ./txt_files/DecisionTable_mod1 , and
   # ./txt_files/DecisionTable_mod3
    # print Model 1 decision table
    print(decision_mod1.table, add.to.row = addtorow, include.rownames = FALSE, 
          caption.placement = 'top', 
          hline.after = c(-1, 0, 10, 20, 30, nrow(decision_mod1.table)), 
          scalebox = .85)

```
<!-- ***********END EXECUTIVE SUMMARY OFL AND DECISION TABLES************** -->



<!-- ***********BEGIN EXECUTIVE SUMMARY RESULTS SUMMARY TABLE --> 
```{r, results='asis'}
   # Print the results summary table, will have to edit the R code and input file 
   # depending on the stock structure
   # Edit file: ./txt_files/Exec_basemodel_summary.csv and the Summary Results 
   # section in R code R_exec_summary_figs_tables.R
  
 print(base_summary.table, 
       include.rownames = FALSE, 
       caption.placement = 'top',
       floating.environment = 'sidewaystable', 
       sanitize.text.function = function(x){x}, 
       scalebox = .6, 
       align = TRUE, 
       hline.after = c(-1, 0, 4, 5, 7, 9, 11, nrow(base_summary.table)))
```

<!-- ***********Yield curve table****************************************** -->
```{r, results='asis'}
   # Select the file to use for the yield curve depending on the number of models
       yield.file  = 'r4ss/plots_mod1/yield1_yield_curve.png'
   
```
<!-- ***********Edit caption based on fixed params************************* -->

![Equilibrium yield curve for the base case model. Values are based on the `r Dat_end_mod1` fishery selectivity and with steepness fixed at... \label{fig:Yield_all}](`r yield.file`)

<!-- ***********END EXECUTIVE SUMMARY RESULTS SUMMARY TABLE AND YIELD CURVE -->

\FloatBarrier

\newpage

##Research And Data Needs{-}
We recommend the following research be conducted before the next assessment:

\begin{enumerate}

\item List item No. 1 in the list

\item List item No. 2 in the list, etc.

\end{enumerate}

##Rebuilding Projections{-}


\FloatBarrier

<!--************RESET FIGURE & TABLE NUMBERS FOR THE DOCUMENT'S MAIN BODY** -->
\newpage
\renewcommand{\thefigure}{\arabic{figure}}
\renewcommand{\thetable}{\arabic{table}}
\setcounter{figure}{0}
\setcounter{table}{0}

<!-- ***********INTRODUCTION SECTION*************************************** -->

#Introduction

##Basic Information
California scorpionfish (\emph{Scorpaena guttata}), also known locally as sculpin or spotted scorpionfish, originates from the Greek word for scorpionfishes and \emph{guttata} is Latin for speckled.  California scorpionfish is a medium-bodied fish and like other species in the genus Scorpaena, it produces a toxin in its dorsal, anal, and pectoral fin spines, which produces intense, painful wounds [@Love1987]. Scorpionfish are very resistant to hooking mortality and have shown survival under extreme conditions. 
 
Its range extends from central California (Santa Cruz) to the Gulf of California, although within U.S. waters they are most common in the Southern California Bight [@Eschmeyer1983; @Love1987]. The species generally inhabits rocky reefs, caves and crevices, but in certain areas and seasons it aggregates over sandy or muddy substrate [@Frey1971; @Love1987].  California scorpionfish have been observed from the intertidal to 600 ft with a preferred depth range from 20-450 ft.  
 
Males and females show different growth rates, with females growing to a larger size than males, and the sexes exhibit different length-weight relationships [@Love1987].   Few California scorpionfish are mature at one year old (14 cm TL). Fifty-percent of fish mature at 17-18 cm (2 years old) and all by 22 cm (4 years old) [@Love1987].
 
California scorpionfish feed on a wide variety of mobile prey, including crabs, fishes (e.g., include northern anchovy, spotted cusk-eel), octopi, isopods and shrimp, [@Love1987; @Turner1969; @Taylor1963; @Quast1968].  The species is nocturnal, but  have been observed feeding during the day.  Predation on scorpionfish is believed to be low, but one individual was found in the gut of a leopard shark (Love pers comm.).
 
California scorpionfish utilize the “explosive breeding assemblage” reproductive mode in which fish migrate to, and aggregate at traditional spawning sites for brief periods [@Love1987].  California scorpionfish migrate to deeper waters (120-360 ft)  to spawn during May-August, with peak spawning occurring July. The species is oviparous, producing floating, gelatinous egg masses in which the eggs are embedded in a single layer [@Orton1955]. and it is believed that spawning takes place just before, and perhaps after dawn, in the water column [@Love1987].  Tagging data suggest California scorpionfish return to the same spawning site, but information is not available on non-spawning season site fidelity. 
 
Little is known about California scorpionfish larvae. The CalCOFI survey observed 463 California scorpionfish larvae from 1977-2000, with the majority at station close to Oxnard (east of the Channel Islands) [@Moser2002]. Higher densities of larvae have been observed in the CalCOFI stations throughout Baja, peaking south of Punta Eugenia from July to September.  The hatching length is reported as 1.9-2.0 mm [@Washington1984] and transformation length of greater than 1.3 cm [@Washington1984] less than 2.1 cm [@Moser1996].  

##Map
A map showing the scope of the assessment and depicting boundaries for fisheries or 
data collection strata is provided in Figure \ref{fig:boundary_map}.

##Life History


##Ecosystem Considerations
In this assessment, ecosystem considerations were not explicitly included in the analysis.  This is primarily due to a lack of relevant data and results of analyses (conducted elsewhere) that could contribute ecosystem-related quantitative information for the assessment.


##Fishery Information


Rockfish example: The rockfish fishery off the U.S. Pacific coast first developed 
off California in the late 19th century as a hook-and-line fishery [@Love2002].  
The rockfish trawl fishery was established in the early 1940s, when the United 
States became involved in World War II and wartime shortage of red meat created 
an increased demand for other sources of protein [@Alverson1964; @Harry1961]. Etc....


##Summary of Management History
Prior to the adoption of the Pacific Coast Groundfish Fishery Management Plan (FMP) 
in 1982, California scorpionfish (\emph{Scorpaena guttata}) was managed through a regulatory 
process that included the California Department of Fish and Wildlife (CDFW) along 
with either the California State Legislature or the Fish and Game Commission (FGC) 
depending on the sector (recreation or commercial) and fishery. With implementation 
of the Pacific Coast Groundfish FMP, California scorpionfish came under the management 
authority of the Pacific Fishery Management Council (PFMC), being incorporated, along 
with all genera and species of the family Scorpaenidae, into a federal rockfish 
classification and managed as part of "Remaining Rockfish" under the larger 
heading of "Other Rockfish" ([@PFMC2004; @PFMC2002], Tables 31-39). 

The ABCs provided by the PFMC's Groundfish Management Team (GMT) in the 1980's 
were based on an analysis of commercial landings from the 1960's and 1970's. 
For this analysis, most of the rockfishes were lumped into one large group. 
This analysis indicated that the landings for rockfish in the Monterey-Conception 
area were at or near ABC levels [@PFMC1993]. To keep landings within these 
adopted harvest targets, the Pacific Coast Groundfish FMP provided the Council 
with a variety of management tools including area closures, season closures, 
gear restrictions, and, for the commercial sector, cumulative limits (generally 
for two-month periods). With the implementation of a federal groundfish restricted 
access program in 1994, allocations of total catch and cumulative limits began 
to be specifically set for open access (including most of California's commercial 
fisheries that target California scorpionfish in Southern California) and limited 
entry fisheries [@PFMC2002; @PFMC2004].  As a result, in the later 1990'ss as commercial 
landings decreased and recreational harvest became a greater proportion of the 
available harvest. 

Beginning in 1997, California scorpionfish was managed as part of the Sebastes 
complex-south, Other Rockfish category. (\emph{Sebastes} complex-south included the 
Eureka, Monterey, and Conception areas while Sebastes complex-north included 
the Vancouver and Columbia areas.)  The PFMC's rockfish management structure 
changed significantly in 2000 with the replacement of the \emph{Sebastes} 
complex -north and -south areas with Minor Rockfish North (now covering the 
Vancouver, Columbia, and Eureka areas) and Minor Rockfish South (now Monterey 
and Conception areas only). The OY for these two groups (which continued to 
be calculated as 0.50 of the ABC) was further divided (between north and 
south of $40^\circ 10^\prime$ N. latitude) into nearshore, shelf, and slope rockfish categories 
with allocations set for Limited Entry and Open Access fisheries within 
each of these three categories (January 4, 2000, 65 FR 221; [@PFMC2002], 
Tables 54-55). Because of its depth range and southern distribution, 
California scorpionfish was included within the Minor Rockfish South, 
Other Rockfish ABC and managed under the south of $40^\circ 10^\prime$ N. latitude
nearshore rockfish OY and trip limits ([@PFMC2002], Table 29).

Along with the above changes, in 2000 the southern area divided into two separate 
management areas at Point Lopez, $36^\circ 00^\prime$ N. latitude. This was followed in 2001 with 
the implementation of the northern rockfish and lingcod management area between 
($40^\circ 10^\prime$ N. latitude) and Point Conception ($34^\circ 27^\prime$ N. 
latitude); and the southern rockfish 
and lingcod management area between Point Conception and the U.S.- Mexico border. 
These were later revised starting in 2004 with the northern rockfish and lingcod 
management area redefined as ocean waters from the Oregon-California border 
($42^\circ 00^\prime$ N. latitude) to $40^\circ 10^\prime$ N. latitude, the central 
rockfish and lingcod management area defined as ocean waters from $40^\circ 10^\prime$ 
N. latitude to Point Conception, and the southern rockfish and management area 
continuing to be defined as ocean waters from Point Conception to the U.S.-Mexico border.

Cowcod Conservation Areas (CCAs) also were established in 2001 to reduce fishing 
effort for cowcod rockfish ([@PFMC2002], Table 29). These areas were closed to 
all recreational and commercial fishing for groundfish except for minor 
nearshore rockfish1 (including California scorpionfish) within waters less 
than 20 fathoms. In addition, Rockfish Conservation Areas (RCAs) were established 
in 2003 to allow for the closure of specific area and depth ranges along the West 
Coast for the purpose of reducing fishing effort for shelf and slope rockfish. 
The California Rockfish Conservation Area (CRCA) was defined as those ocean waters 
south $40^\circ 10^\prime$ N. latitude to the U.S.-Mexico border with different depth 
zones specified for the areas north and south of Pt. Reyes ($37^\circ 59.73^\prime$ N. latitude). 

During the late 1990's and early 2000's, major changes also occurred in the way 
that California managed its nearshore fishery. The Marine Life Management Act 
(MLMA), which was passed in 1998 by the California Legislature and enacted in 
1999, required that the FGC adopt an FMP for nearshore finfish. It also gave 
authority to the FGC to regulate commercial and recreational nearshore fisheries 
through FMPs and provided broad authority to adopt regulations for the nearshore 
fishery during the time prior to adoption of the nearshore finfish FMP. Within this 
legislation, the Legislature also included commercial size limits for nine nearshore
species including California scorpionfish (10-inch minimum size) and a requirement 
that commercial fishermen landing these nine nearshore species possess a nearshore permit.

Following adoption of the Nearshore FMP and accompanying regulations by the FGC in 
fall of 2002, the FGC adopted regulations in November 2002 which established a set 
of marine reserves around the Channel Islands in Southern California (which became 
effective April 2003) and adopted a nearshore restricted access program in December 
2002 (which included the establishment of a Deeper Nearshore Permit) to be effective 
starting in the 2003 fishing year.

Although the Nearshore FMP provided for the management of the nearshore rockfish 
and California scorpionfish, management authority for these species continued to 
reside with the Council. Even so, for the 2003 and subsequent fishery seasons, 
the State provided recommendations to the Council specific to the nearshore 
species that followed the directives set out in the Nearshore FMP. These 
recommendations, which the Council incorporated into the 2003 management 
specifications, included a recalculated OY for Minor Rockfish South - Nearshore, 
division of the Minor Rockfish South - Nearshore into three groups (shallow 
nearshore rockfish; deeper nearshore rockfish; and California scorpionfish), 
and specific harvest targets and recreational and commercial allocations for 
each of these groups. 

Also, since the enactment of the MLMA, the Council and State in a coordinated 
effort developed and adopted various management specifications to keep harvest 
within the harvest targets, including seasonal and area closures (e.g. the CCAs; 
a closure of Cordell Banks to specific fishing), depth restrictions, minimum 
size limits, and bag limits to regulate the recreational fishery and license 
and permit regulations, finfish trap permits, gear restrictions, seasonal 
and area closures (e.g. the RCAs and CCAs; a closure of Cordell Banks to 
specific fishing), depth restrictions, trip limits, and minimum size 
imits to regulate the commercial fishery.


##Management Performance

Management performance table: (Table \ref{tab:mnmgt_perform})      
A summary of these values as well as other base case summary results can be found 
in Table \ref{tab:base_summary}.


##Fisheries off Mexico
Include if necessary.

<!-- ************ASSESSMENT SECTION**************************************** -->
#Assessment

##Data
Data used in the `r spp` assessment are summarized in Figure \ref{fig:data_plot}.  
A description of each data source is below.


<!-- ************FISHERY-DEPENDENT DATA************************************ -->
###Commercial Fishery Landings

**Sub-heading 1**

**Sub-heading 2**

**Sub-heading 3**

###Sport Fishery Removals

**Sub-heading 1**

**Sub-heading 2**

**Sub-heading 3**

###Estimated Discards

**Sub-heading 1**

**Sub-heading 2**

**Sub-heading 3**


###Abundance Indices

**Sub-heading 1**

**Sub-heading 2**



<!-- ************FISHERY-INDPENDENT DATA*********************************** -->

###Fishery-Independent Data: possible sources
 *Northwest Fisheries Science Center (NWFSC) slope survey*    
The NWFSC slope survey was conducted annually from 1999 to 2002.  
The depth range of this survey is 100-700 fm. 

*Northwest Fisheries Science Center (NWFSC) shelf-slope survey*     
This survey is referred to as the “combo,” conducted annually since 2003.  
The survey consistently covered depths between 30 and 700 fm.

*Alaska Fisheries Science Center (AFSC) shelf survey*     
The survey, often referred to as the “triennial” survey was conducted every 
third year between 1977 and (and conducted in 2004 by the NWFSC using the 
same protocols).  The triennial survey trawls in depths of 30 to 275 fm.



*Partnership For Interdisciplinary Studies of Coastal Oceans (PISCO)*       
Blurb on species presence in PISCO surveys

<!--************BIOLOGICAL DATA*********************************************-->
###Biological Parameters and Data

**Length And Age Compositions**

Include: Sample size information for length and age composition data by area, 
year, gear, market category, etc., including both the number of trips and 
fish sampled.

Length compositions were provided from the following sources, with 
brief descriptions below:    

\begin{itemize}[noitemsep,nolistsep,topsep=0pt]
  \item CDFW market category study (\emph{commercial dead fish},1996-2003)    
  \item CALCOM (\emph{commercial dead fish}, 2013-2016)    
  \item CDFW onboard observer (\emph{recreational charter discards}, 2003-2016)    
  \item Ally onboard observer study (\emph{recreational charter discards}, 1984-1989)  
  \item California recreational sources combined (\emph{recreational charter retained catch})     
    \begin{itemize}[noitemsep,nolistsep]
      \item CDFW and Ally onboard observer surveys (1984-1989)     
      \item Collins and Crooke onboard observer surveys (1975-1978)     
      \item MRFSS (1980-2003)     
      \item CRFS (2004-2014)
    \end{itemize}
 \item California recreational sources combined (\emph{private mode retained catch})      
    \begin{itemize}[noitemsep,nolistsep]   
      \item MRFSS (1980-2003)      
      \item CRFS (2004-2016)  
    \end{itemize}
 \item Sanitation district trawl surveys (\emph{research}, 1970-2016)      
 \item CSUN/VRG gillnet survey (\emph{research}, 1995-2008)        
 \item Power plant impingement surveys (\emph{research}, 1974-2016) 
 \item Southern California Bight trawl survey (\emph{research}, 1994,1998,2003,2008,2013) 
\end{itemize}

*Recreational: California MRFSS And CRFS Length Composition Data*
Individual fish lengths recorded by MRFSS (1980-2003) and CRFS (2004-2011) samplers were
downloaded from the RecFIN website (www.recfin.org). CRFS data from 2012-2014 were
obtained directly from CDFW.

*Commercial: PacFIN*

*Research: NWFSC shelf-slope survey*

*Research: NWFSC slope survey*






\vspace{.5cm}
**Age Structures**
Age data were provided from the NWFSC trawl survey from 2005-2016.  

Length-at-age was initially estimated external to the population dynamics models 
using the von Bertalanffy growth curve [@vonB1938], $L_i = L_{\infty}e^{(-k[t-t_0])}$, 
where $L_i$ is the length (cm) at age $i$, $t$ is age in years, $k$ is rate of 
increase in growth, $t_0$ is the intercept, and $L_{\infty}$ is the asymptotic length.  



\vspace{.5cm}
**Aging Precision And Bias**




\vspace{.5cm}
**Weight-Length**

The weight-length relationship is based on the standard power function: 
$W = \alpha(L^\beta)$ where $W$ is individual weight (kg), $L$ is length (cm), 
and $\alpha$ and $\beta$ are coefficients used as constants.



\vspace{.5cm}
**Maturity And Fecundity**



\vspace{.5cm}
**Natural Mortality**
Hamel [-@Hamel2015] developed a method for combining meta-analytic approaches to relating the natural mortality rate $M$ to other life-history parameters such as longevity, size, growth rate and reproductive effort, to provide a prior on M. In that same issue of ICESJMS, Then et al. [-@Then2015], provided an updated data set of estimates of $M$ and related life history parameters across a large number of fish species, from which to develop an $M$ estimator for fish species in general. They concluded by recommending $M$ estimates be based on maximum age alone, based on an updated Hoenig non-linear least squares (nls) estimator $M= 4.899*{A_{max}}^{-.916}$. The approach of basing $M$ priors on maximum age alone was one that was already being used for west coast rockfish assessments. However, in fitting the alternative model forms relating $-.916M$ to $A_{max}$, Then et al. [-@Then2015] did not consistently apply their transformation. In particular, in real space, one would expect substantial heteroscedasticity in both the observation and process error associated with the observed relationship of $M$ to $A_{max}$. Therefore, it would be reasonable to fit all models under a log transformation. This was not done.
Revaluating the data used in Then et al. [-@Then2015] by fitting the one-parameter $A_{max}$ model under a log-log transformation (such that the slope is forced to be -1 in the transformed space (as in Hamel [-@Hamel2015]), the point estimate for $M$ is:
\begin{equation}
M = \frac{5.4}{A_{max}}
\end{equation}
 
The above is also the median of the prior. The prior is defined as a lognormal with mean $ln\frac{5.4}{A_{max}}$  and SE = 0.4384343. Using a maximum age of 21 the point estimate and median of the prior is 0.2545, which is used as a prior for females in the assessment model.



\vspace{.5cm}
**Sex ratios**



###Environmental Or Ecosystem Data Included In The Assessment






<!-- ***********HISTORY AND CURRENT ASSESSMENT***************************** -->
##History Of Modeling Approaches Used For This Stock

###Previous Assessments

###2005 Assessment Recommendations
Include: Response to STAR panel recommendations from the most recent previous 
assessment.

\begin{description}[style=unboxed]

  \item[Recommendation 1: The sanitation surveys conducted to track the impact 
  of sewage outfall provided a fishery independent index of abundance for 
  scorpionfish. This data source should be more fully explored for other 
  near-shore species of recreational or commercial interest. Methods should 
  be developed to produce a more statistically rigorous index from the 
  separate surveys.] \hfill \\

   STAT response: Data from all sanitation districts in southern California 
   were obtained for this assessment.  All of the data were pooled across
   surveys to develop one index of abundance using the delta-GLM method

\item[Recommendation 2: An age, growth and maturity study for scorpionfish is 
needed.  Although there has been previous research on scorpionfish age and growth, 
the available information is not appropriate for stock assessment modeling.] \hfill \\

  STAT response: Age data are available from the NWFSC trawl survey from 2005-2016.
  THere have been no additional studies on growth or maturity for California 
  scorpionfish since the 2005 assessment.

\item[Recommendation 3: Location information for the historic groundfish data 
of all species is currently available, in hard copy form only, from the 
California Department of Fish and Game. Putting this information into electronic 
format would greatly improve the ability to assign catches of all species to 
specific stocks on a trip-by-trip basis.] \hfill \\

  STAT response: The location-sepciic catches referred to above have been
  key-punched and are available in electornic form from the SWFSC, Santa Cruz.

\item[Recommendation 4: The SS2 model should be modified to allow for projections 
of user-specified recruitment at user defined values. It would be most helpful if 
the default harvest policies were then recalculated automatically for these 
user-specified recruitments.] \hfill \\

  STAT response: The status of this within Stock Synthesis is unknown.
  
\end{description}




<!-- ************************MODEL DESCRIPTION***************************** -->
##Model Description


###Transition To The Current Stock Assessment
Include: Complete description of any new modeling approaches

Below, we describe the most important changes made since the last full assessment 
and explain rationale for each change.:

1. Change No. 1. \emph{Rationale}: blah blah blah.

2. Change No. 2.  \emph{Rationale}: blah blah blah.

3. Change No. 3.  \emph{Rationale}:  Continue list as needed.



###Definition of Fleets and Areas
We generated data sources for each of the models.  Fleets by model include:


**Model Region 1 or remove this line if only one model** 

\emph{Commercial}: The commercial fleets include...   

\emph{Recreational}: The recreational fleets include...

\emph{Research}: Research derived-data include...



###Summary of Data for Fleets and Areas



###Modeling Software
The STAT team used Stock Synthesis 3 version 3.30.0.4 by Dr. Richard Methot at 
the NWFSC. This most recent version was used, since it included 
improvements and corrections to older versions.  The r4SS package 
(GitHub release number v1.27.0) was used to post-processing output data from Stock
Synthesis. 

###Data Weighting
Citation for Francis method [@Francis2011]      
Citation for Ianelli-McAllister harmonic mean method [@McAllister1997]



###Priors
Citation for Hamel prior on natural mortality [@Hamel2015]


###General Model Specifications
    
Model data, control, starter, and forecast files can be found in Appendices A-D.


###Estimated And Fixed Parameters
A full list of all estimated and fixed parameters is provided in Tables....
Estimated and fixed parameters tables currently read in from .csv file, 
EXAMPLE: Table \ref{tab:Model1_params}


##Model Selection and Evaluation
###Key Assumptions and Structural Choices
Include: Evidence of search for balance between model realism and parsimony.  
Comparison of key model assumptions, include comparisons based on nested models 
(e.g., asymptotic vs. domed selectivities, constant vs. time-varying selectivities).  



###Alternate Models Considered
Include: Summary of alternate model configurations that were tried but rejected.



###Convergence
Include: Randomization run results or other evidence of search for global 
best estimates.    

Convergence testing through use of dispersed starting values often requires 
extreme values to actually explore new areas of the multivariate likelihood 
surface. Jitter is a SS option that generates random starting values from a 
normal distribution logistically transformed into each parameter's range 
[@Methot2015]. Table \ref{tab:jitter} shows the results of running 100 jitters 
for each pre-STAR base model....

##Response To The Current STAR Panel Requests
\begin{description}[style=unboxed]

\item[Request No. 1: Add after STAR panel.] \hfill \\

    \textbf{Rationale:} Add after STAR panel.  

    \textbf{STAT Response:} Add after STAR panel.

\item[Request No. 2: Add after STAR panel.] \hfill \\

    \textbf{Rationale:} Add after STAR panel.

    \textbf{STAT Response:} Add after STAR panel.

\item[Request No. 3: Add after STAR panel.] \hfill \\

    \textbf{Rationale:} Add after STAR panel.
  
    \textbf{STAT Response:} Add after STAR panel.

\item[Request No. 4: Example of a request that may have a list:] \hfill \\
\begin{itemize}
\item \textbf{Item No. 1}
\item \textbf{Item No. 2}
\item \textbf{Item No. 3, etc.}
\end{itemize}

    \textbf{Rationale:} Add after STAR panel.

    \textbf{STAT Response:} Continue requests as needed.


\end{description}

<!-- *********************MODEL 1 RESULTS********************************** -->
##Model 1 
###Model 1 Base Case Results

Table \ref{tab:Model1_params}   



### Model 1 Uncertainty and Sensitivity Analyses
Table \ref{tab:Sensitivity_model1}



### Model 1 Retrospective Analysis
 

### Model 1 Likelihood Profiles


###Model 1 Harvest Control Rules (CPS only)

###Model 1 Reference Points (groundfish only)
Intro sentence or two....(Table \ref{tab:Timeseries_mod1}). 

Equilibrium yield at the proxy $F_{MSY}$ harvest rate corresponding to 
$SPR_{50\%}$ is `r Ref_pts_mod1[15,2]` mt.  Table \ref{tab:Ref_pts_mod1} 
shows the full suite of estimated reference points for the northern area model 
and Figure \ref{fig:Yield_all} shows the equilibrium yield curve.



<!-- **************HARVEST PROJECTIONS AND DECISION TABLE****************** -->
#Harvest Projections and Decision Tables
Table \ref{tab:mnmgt_perform}

**Model 1 Projections and Decision Table (groundfish only)**
(Table \ref{tab:Forecast_mod1} 

Table \ref{tab:Decision_table_mod1}

**Model 2 Projections and Decision Table (groundfish only)** 

**Model 3 Projections and Decision Table (groundfish only)**


<!-- **************************REGIONAL MANAGEMENT************************* -->
#Regional Management Considerations
1.  For stocks where current practice is to allocate harvests by management 
area, a recommended method of allocating harvests based on the distribution 
of biomass should be provided.  The MT advisor should be consulted on the 
appropriate management areas for each stock.
2.  Discuss whether a regional management approach makes sense for the species 
from a biological perspective.
3.  If there are insufficient data to analyze a regional management approach,
what are the research and data needs to answer this question?



<!-- ****************************RESEARCH NEEDS**************************** -->
#Research Needs
\begin{enumerate}

\item Research need No. 1

\item Research need No. 2

\item Research need No. 3

\item etc.

\end{enumerate}


<!-- ***************************ACKNOWLEDGEMENTS*************************** -->
#Acknowledgments
Include: STAR panel members and affiliations as well as names and affiliations 
of persons who contributed data, advice or information but were not part of the 
assessment team. Not required in draft assessment undergoing review.


\newpage
\FloatBarrier

<!-- ====================================================================== -->
<!-- ****************************            ****************************** --> 
<!-- ****************************BEGIN TABLES****************************** --> 
<!-- ****************************             ***************************** --> 
<!-- ======================================================================--> 

#Tables

<!-- ********************************************************************** --> 
<!-- *********************Commercial landings TABLES*********************** --> 
<!-- ********************************************************************** --> 
```{r, eval=TRUE, echo=FALSE, message=FALSE, warning=FALSE, include=FALSE}
     Comm_removal = read.csv("./txt_files/Comm_removals.csv")
     colnames(Comm_removal) = c('Year',
                                'Hook-and-line',
                                'Trawl',
                                'Gillnet',
                                'Mexico',
                                'Total U.S. Removals',
                                'Source')
```
```{r, eval=TRUE, echo=FALSE, results='asis', message=FALSE}
   Comm_removal.table = xtable(Comm_removal, 
                    caption = c("Commercial removals (mt) from the commercial 
                                fisheries. Data sources are the the CDFG Fishery
                                Bulletins (availabl from California Explores the Ocean)
                                and the California Fisheries Information System (CFIS)"),
                    label="tab:Comm_catches")
   align(Comm_removal.table) =c('l','c', 
                            '>{\\centering}p{1in}',
                            '>{\\centering}p{.6in}',
                            '>{\\centering}p{.6in}',
                            '>{\\centering}p{.6in}',
                            '>{\\centering}p{1in}',
                            'l')  
     print(Comm_removal.table,include.rownames=FALSE,      
           caption.placement="top",align=TRUE,tabular.environment="longtable",
                     sanitize.text.function = function(x){x}, floating=FALSE,
                     add.to.row = list(pos = list(0),command = "\\hline \\endhead "))
```




\FloatBarrier
\newpage
<!-- ********************************************************************** --> 
<!-- ***********Recreational Landings and discards TABLE******************* --> 
<!-- ********************************************************************** --> 
<!-- Washington rec removal TABLES--> 
```{r, eval=TRUE, echo=FALSE, message=FALSE, warning=FALSE, include=FALSE}
     Rec_removal = read.csv("./txt_files/Rec_removals.csv")
     colnames(Rec_removal) = c('Year',
                                  'Private',
                                  'Party/charter',
                                  'Dead Discard (all modes)',
                                  'Total Removals')
```
```{r, eval=TRUE, echo=FALSE, results='asis', message=FALSE}
   Rec_removal.table = xtable(Rec_removal, 
                          caption = c("Recreational removals (mt) from the party/charter 
                                        and private vessels. Removals from man-made and 
                                        beach/bank modes were included in the private mode
                                        removals. Dead discards include all modes. CDFW provided 
                                        all data. Note: A discard mortality rate of 7% was applied 
                                        to the dead discard removals."),
                          label="tab:Rec_removal")
    align(Rec_removal.table) = 'lccccc'
  
    print(Rec_removal.table,include.rownames=FALSE, 
          caption.placement="top",tabular.environment="longtable",align=TRUE,     
                    floating=FALSE, add.to.row = list(pos = list(0),command = "\\hline \\endhead "))

```

\FloatBarrier
<!-- ********************************************************************** --> 
<!-- ***********Fleet 4 Recreational PR dockside survey TABLES************* --> 
<!-- ********************************************************************** --> 


```{r, eval=TRUE, echo=FALSE, message=FALSE, warning=FALSE, include=FALSE}
      ##read in data for 3 tables
        Fleet4_filter = read.csv("./txt_files/Fleet4_RecPR_dockside_filter.csv")
        Fleet4_aic = read.csv("./txt_files/Fleet4_RecPR_dockside_aic.csv")
        Fleet4_index = read.csv("./txt_files/Fleet4_RecPR_dockside_index.csv")
        
        colnames(Fleet4_filter) = c('Filter',
                                    'Criteria',
                                    'Sample size (no. positive trips)',
                                    'Sample size (no. of trips)')
        
        colnames(Fleet4_aic) = c('Model',
                                 'Binomial',
                                 'Lognormal')
        
        colnames(Fleet4_index) = c('Year',
                                   'Index',
                                   'Log-scale SE')
      

```
```{r, eval=TRUE, echo=FALSE, results='asis', message=FALSE}
    #Fleet 4 filter
         Fleet4_filter.table = xtable(Fleet4_filter,
                              caption = c("Recreational private mode dockside data sample 
                                          sizes at each data filtering step.  
                                          The bold value indicates the final sample size 
                                          used for delta-GLM analysis."),
                              label='tab:Fleet4_RecPR_dockside_filter')
        
        align(Fleet4_filter.table) = c('l',
                                  '>{\\raggedright}p{1.5in}',
                                  '>{\\raggedright}p{2.6in}',
                                  '>{\\raggedright}p{1in}',
                                  '>{\\raggedright}p{1in}')          
        
        print(Fleet4_filter.table, 
              include.rownames=FALSE, 
              caption.placement="top",
              sanitize.text.function = function(x){x})

   #Fleet 4 aic
         Fleet4_aic.table = xtable(Fleet4_aic,
                              caption = c("AIC values for each model in the
                                          recreational private mode dockside sample 
                                          index."),
                              label='tab:Fleet4_RecPR_dockside_aic')
        
        
        print(Fleet4_aic.table, 
              include.rownames=FALSE, 
              caption.placement="top",
              sanitize.text.function = function(x){x})

   #Fleet 4 index
         Fleet4_index.table = xtable(Fleet4_index,
                              caption = c("The recreational private mode 
                                            dockside sample index."),
                              digits=4,
                              label='tab:Fleet4_RecPR_dockside_index')
        
        
        print(Fleet4_index.table, 
              include.rownames=FALSE, 
              caption.placement="top",
              sanitize.text.function = function(x){x})
```

\FloatBarrier
<!-- ********************************************************************** -->
<!-- ************Fleet 5 Recreational CPFV logbook index TABLES************ -->
<!-- ********************************************************************** -->
```{r, eval=TRUE, echo=FALSE, message=FALSE, warning=FALSE, include=FALSE}
      ##read in data for 3 tables
        Fleet5_filter = read.csv("./txt_files/Fleet5_RecPC_CPFVlogbook_filter.csv")
        Fleet5_aic = read.csv("./txt_files/Fleet5_RecPC_CPFVlogbook_aic.csv")
        Fleet5_index = read.csv("./txt_files/Fleet5_RecPC_CPFVlogbook_index.csv")
        
        colnames(Fleet5_filter) = c('Filter',
                                    'Criteria',
                                    'Sample size (no. of trips)')
        
        colnames(Fleet5_aic) = c('Model',
                                 'Negative Binomial')
        
        colnames(Fleet5_index)= c('Year',
                                  'Index',
                                  'Log-scale SE')

```
```{r, eval=TRUE, echo=FALSE, results='asis', message=FALSE}
    #Fleet 5 filter
         Fleet5_filter.table = xtable(Fleet5_filter,
                              caption = c("Recreational CPFV logbook sample 
                                          sizes at each data filtering step.  
                                          The bold value indicates the final sample size 
                                          used for delta-GLM analysis."),
                              label='tab:Fleet5_RecPC_CPFVlogbook_filter')
        
        align(Fleet5_filter.table) = c('l',
                                  '>{\\raggedright}p{1.5in}',
                                  '>{\\raggedright}p{3in}',
                                  '>{\\raggedright}p{1in}')          
        
        print(Fleet5_filter.table, 
              include.rownames=FALSE, 
              caption.placement="top",
              sanitize.text.function = function(x){x})

   #Fleet 5 aic
         Fleet5_aic.table = xtable(Fleet5_aic,
                              caption = c("AIC values for each model in the
                                          recreational CPFV logbook sample 
                                          index."),
                              label='tab:Fleet5_RecPC_CPFVlogbook_aic')
        
        
        print(Fleet5_aic.table, 
              include.rownames=FALSE, 
              caption.placement="top",
              sanitize.text.function = function(x){x})

   #Fleet 5 index
         Fleet5_index.table = xtable(Fleet5_index,
                              digits=4,
                              caption = c("The recreational CPFV  
                                            logbook sample index."),
                              label='tab:Fleet5_RecPC_CPFVlogbook_index')
        
        
        print(Fleet5_index.table, 
              include.rownames=FALSE,
              caption.placement="top",
              sanitize.text.function = function(x){x},
              scalebox=.9)
```


\FloatBarrier
<!-- ********************************************************************** -->
<!-- *****Fleets 6 and 12 Recreational onboard observer index TABLES******* -->
<!-- ********************************************************************** -->


```{r, eval=TRUE, echo=FALSE, message=FALSE, warning=FALSE, include=FALSE}
      ##read in data for 3 tables
        Fleet6_filter = read.csv("./txt_files/Fleets6_12_onboard_filter.csv")
        Fleet6_aic = read.csv("./txt_files/Fleet6_RecDD_onboard_aic.csv")
        Fleet6_index = read.csv("./txt_files/Fleet6_RecDD_onboard_index.csv")
        Fleet12_aic = read.csv("./txt_files/Fleet12_RecPC_onboard_aic.csv")
        Fleet12_index = read.csv("./txt_files/Fleet12_RecPC_onboard_index.csv")
        
        colnames(Fleet6_filter) = c('Filter',
                                    'Criteria',
                                    'Sample size (no. positive trips)',
                                    'Sample size (no. of trips)')
        
        colnames(Fleet6_aic) = c('Model',
                                 'Binomial',
                                 'Lognormal')
        
        colnames(Fleet6_index) = c('Year',
                                   'Index',
                                   'Log-scale SE')
      
        colnames(Fleet12_aic) = c('Model',
                                 'Binomial',
                                 'Lognormal')
        
        colnames(Fleet12_index) = c('Year',
                                   'Index',
                                   'Log-scale SE')

```
```{r, eval=TRUE, echo=FALSE, results='asis', message=FALSE}
    #Fleet 6 and 12 filter
         Fleet6_filter.table = xtable(Fleet6_filter,
                              caption = c("Recreational onboard observer data sample 
                                          sizes at each data filtering step.  
                                          The bold value indicates the final sample size 
                                          used for delta-GLM analysis.
                                          The same sample data were used for the discard-only
                                          index and the retained-only catch indices"),
                              label='tab:Fleet6_RecDD_onboard_filter')
        
        align(Fleet6_filter.table) = c('l',
                                  '>{\\raggedright}p{1.5in}',
                                  '>{\\raggedright}p{2.6in}',
                                  '>{\\raggedright}p{1in}',
                                  '>{\\raggedright}p{1in}')          
        
        print(Fleet6_filter.table, 
              include.rownames=FALSE, 
              caption.placement="top",
             # tabular.environment="tabularx",
              sanitize.text.function = function(x){x})

   #Fleet 6 aic
         Fleet6_aic.table = xtable(Fleet6_aic,
                              caption = c("AIC values for each model in the
                                          The recreational CPFV onboard 
                                          observer discard-only catch 
                                          index."),
                              label='tab:Fleet6_RecDD_onboard_aic')
        
        
        print(Fleet6_aic.table, 
              include.rownames=FALSE, 
              caption.placement="top",
              sanitize.text.function = function(x){x})

   #Fleet 6 index
         Fleet6_index.table = xtable(Fleet6_index,
                              caption = c("The recreational CPFV
                                            onboard observer discard-only
                                            catch sample index."),
                              digits=4,
                              label='tab:Fleet6_RecDD_onboard_index')
        
        
        print(Fleet6_index.table, 
              include.rownames=FALSE, 
              caption.placement="top",
              sanitize.text.function = function(x){x})
        
        
  #Fleet 12 aic
         Fleet12_aic.table = xtable(Fleet12_aic,
                              caption = c("AIC values for each model in the
                                          The recreational CPFV onboard 
                                          observer retained-only catch 
                                          index."),
                              label='tab:Fleet12_RecPC_onboard_aic')
        
        
        print(Fleet12_aic.table, 
              include.rownames=FALSE, 
              caption.placement="top",
              sanitize.text.function = function(x){x})

   #Fleet 12 index
         Fleet12_index.table = xtable(Fleet12_index,
                              caption = c("The recreational CPFV
                                            onboard observer retained-only
                                            catch sample index."),
                              digits=4,
                              label='tab:Fleet12_RecPC_onboard_index')
        
        
        print(Fleet12_index.table, 
              include.rownames=FALSE, 
              caption.placement="top",
              digits=4,
              sanitize.text.function = function(x){x})
```


\FloatBarrier
<!-- ********************************************************************** -->
<!-- ***************Fleet 7 Sanitation index TABLES************************ -->
<!-- ********************************************************************** -->
```{r, eval=TRUE, echo=FALSE, message=FALSE, warning=FALSE, include=FALSE}
      ##read in data for 3 tables
        Fleet7_filter = read.csv("./txt_files/Fleet7_Sanitation_filter.csv")
        Fleet7_aic = read.csv("./txt_files/Fleet7_Sanitation_aic.csv")
        Fleet7_index = read.csv("./txt_files/Fleet7_Sanitation_index.csv")
        
        colnames(Fleet7_filter) = c('Filter',
                                    'Criteria',
                                    'City of LA',
                                    'LA County',
                                    'Orange County',
                                    'City of San Diego',
                                    'Total trawls')
        
        colnames(Fleet7_aic) = c('Model',
                                 'Binomial',
                                 'Lognormal')
        
        colnames(Fleet7_index) = c('Year',
                                   'Index',
                                   'Log-scale SE')
      

```
```{r, eval=TRUE, echo=FALSE, results='asis', message=FALSE}
    #Fleet 7 filter
         Fleet7_filter.table = xtable(Fleet7_filter,
                              caption = c("The trawl sample sizes for each
                                          sanitation district at each data filtering step.  
                                          The bold value indicates the final sample size 
                                          used for delta-GLM analysis."),
                              label='tab:Fleet7_Sanitation_filter')
        
        align(Fleet7_filter.table) = c('l',
                                  '>{\\raggedright}p{.8in}',
                                  '>{\\raggedright}p{2in}',
                                  '>{\\raggedright}p{.6in}',
                                  '>{\\raggedright}p{.6in}',
                                  '>{\\raggedright}p{.6in}',
                                  '>{\\raggedright}p{.8in}',
                                  '>{\\raggedright}p{.6in}')          
        
        print(Fleet7_filter.table, 
              include.rownames=FALSE, 
              caption.placement="top",
              sanitize.text.function = function(x){x})

   #Fleet 7 aic
         Fleet7_aic.table = xtable(Fleet7_aic,
                              caption = c("AIC values for each model in the
                                         sanitation districts trawl sample 
                                          index."),
                              label='tab:Fleet7_Sanitation_aic')
        
        
        print(Fleet7_aic.table, 
              include.rownames=FALSE, 
              caption.placement="top",
              sanitize.text.function = function(x){x})

   #Fleet 7 index
         Fleet7_index.table = xtable(Fleet7_index,
                              caption = c("The sanitation districts 
                                           trawl sample index."),
                              digits=4,
                              label='tab:Fleet7_Sanitation_index')
        
        
        print(Fleet7_index.table, 
              include.rownames=FALSE, 
              caption.placement="top",
              sanitize.text.function = function(x){x},
              scalebox=.9)
```

\FloatBarrier
<!-- ********************************************************************** -->
<!-- **************Fleet 8 NWFSC trawl survey index TABLES***************** -->
<!-- ********************************************************************** -->


```{r, eval=TRUE, echo=FALSE, message=FALSE, warning=FALSE, include=FALSE}
      ##read in data for 3 tables
        Fleet8_filter = read.csv("./txt_files/Fleet8_NWFSCTrawl_filter.csv")
        Fleet8_aic = read.csv("./txt_files/Fleet8_NWFSCTrawl_aic.csv")
        Fleet8_index = read.csv("./txt_files/Fleet8_NWFSCTrawl_index.csv")
        
        colnames(Fleet8_filter) = c('Filter',
                                    'Criteria',
                                    'Sample size (no. positive trips)',
                                    'Sample size (no. of trips)')
        
        colnames(Fleet8_aic) = c('Model',
                                 'Binomial',
                                 'Lognormal')
        
        colnames(Fleet8_index) = c('Year',
                                   'Index',
                                   'Log-scale SE')
      

```
```{r, eval=TRUE, echo=FALSE, results='asis', message=FALSE}
    #Fleet 8 filter
         Fleet8_filter.table = xtable(Fleet8_filter,
                              caption = c("NWFSC trawl survey sample 
                                          sizes at each data filtering step.  
                                          The bold value indicates the final sample size 
                                          used for delta-GLM analysis."),
                              label='tab:Fleet8_NWFSCTrawl_filter')
        
        align(Fleet8_filter.table) = c('l',
                                  '>{\\raggedright}p{1.5in}',
                                  '>{\\raggedright}p{2.6in}',
                                  '>{\\raggedright}p{1in}',
                                  '>{\\raggedright}p{1in}')          
        
        print(Fleet8_filter.table, 
              include.rownames=FALSE, 
              caption.placement="top",
              sanitize.text.function = function(x){x})

   #Fleet 8 aic
         Fleet8_aic.table = xtable(Fleet8_aic,
                              caption = c("AIC values for each model in the
                                          NWFSC trawl survey sample 
                                          index."),
                              label='tab:Fleet8_NWFSCTrawl_aic')
        
        
        print(Fleet8_aic.table, 
              include.rownames=FALSE, 
              caption.placement="top",
              sanitize.text.function = function(x){x})

   #Fleet 8 index
         Fleet8_index.table = xtable(Fleet8_index,
                              caption = c("The NWFSC trawl survey
                                            index."),
                              digits=4,
                              label='tab:Fleet8_NWFSCTrawl_index')
        
        
        print(Fleet8_index.table, 
              include.rownames=FALSE, 
              caption.placement="top",
              sanitize.text.function = function(x){x})
```


\FloatBarrier
<!-- ********************************************************************** -->
<!-- ***************Fleet 9 Gillnet survey index TABLES******************** -->
<!-- ********************************************************************** -->

```{r, eval=TRUE, echo=FALSE, message=FALSE, warning=FALSE, include=FALSE}
      ##read in data for 3 tables
        Fleet9_filter = read.csv("./txt_files/Fleet9_GillnetSurvey_filter.csv")
        Fleet9_aic = read.csv("./txt_files/Fleet9_GillnetSurvey_aic.csv")
        Fleet9_index = read.csv("./txt_files/Fleet9_GillnetSurvey_index.csv")
        
        colnames(Fleet9_filter) = c('Filter',
                                    'Criteria',
                                    'Sample size (no. positive trips)',
                                    'Sample size (no. of trips)')
        
        colnames(Fleet9_aic) = c('Model',
                                 'Binomial',
                                 'Lognormal')
        
        colnames(Fleet9_index) = c('Year',
                                   'Index',
                                   'Log-scale SE')
      

```
```{r, eval=TRUE, echo=FALSE, results='asis', message=FALSE}
    #Fleet 9 filter
         Fleet9_filter.table = xtable(Fleet9_filter,
                              caption = c("Recreational private mode dockside data sample 
                                          sizes at each data filtering step.  
                                          The bold value indicates the final sample size 
                                          used for delta-GLM analysis."),
                              label='tab:Fleet9_GillnetSurvey_filter')
        
        align(Fleet9_filter.table) = c('l',
                                  '>{\\raggedright}p{1.5in}',
                                  '>{\\raggedright}p{2.6in}',
                                  '>{\\raggedright}p{1in}',
                                  '>{\\raggedright}p{1in}')          
        
        print(Fleet9_filter.table, 
              include.rownames=FALSE, 
              caption.placement="top",
              sanitize.text.function = function(x){x})

   #Fleet 9 aic
         Fleet9_aic.table = xtable(Fleet9_aic,
                              caption = c("AIC values for each model in the
                                          recreational private mode dockside sample 
                                          index."),
                              label='tab:Fleet9_GillnetSurvey_aic')
        
        
        print(Fleet9_aic.table, 
              include.rownames=FALSE, 
              caption.placement="top",
              sanitize.text.function = function(x){x})

   #Fleet 9 index
         Fleet9_index.table = xtable(Fleet9_index,
                              caption = c("The recreational private mode 
                                            dockside sample index."),
                              digits=4,
                              label='tab:Fleet9_GillnetSurvey_index')
        
        
        print(Fleet9_index.table, 
              include.rownames=FALSE, 
              caption.placement="top",
              sanitize.text.function = function(x){x})
```
\FloatBarrier
<!-- ********************************************************************** -->
<!-- ***************Fleet 11 Bight trawl survey index TABLES*************** -->
<!-- ********************************************************************** -->

```{r, eval=TRUE, echo=FALSE, message=FALSE, warning=FALSE, include=FALSE}
      ##read in data for 3 tables
        Fleet11_filter = read.csv("./txt_files/Fleet11_SCBSurvey_filter.csv")
        Fleet11_aic = read.csv("./txt_files/Fleet11_SCBSurvey_aic.csv")
        Fleet11_index = read.csv("./txt_files/Fleet11_SCBSurvey_index.csv")
        
        colnames(Fleet11_filter) = c('Filter',
                                    'Criteria',
                                    'Sample size (no. positive trips)',
                                    'Sample size (no. of trips)')
        
        colnames(Fleet11_aic) = c('Model',
                                 'Binomial',
                                 'Lognormal')
        
        colnames(Fleet11_index) = c('Year',
                                   'Index',
                                   'Log-scale SE')
      

```
```{r, eval=TRUE, echo=FALSE, results='asis', message=FALSE}
    #Fleet 11 filter
         Fleet11_filter.table = xtable(Fleet11_filter,
                              caption = c("Recreational private mode dockside data sample 
                                          sizes at each data filtering step.  
                                          The bold value indicates the final sample size 
                                          used for delta-GLM analysis."),
                              label='tab:Fleet11_SCBSurvey_filter')
        
        align(Fleet11_filter.table) = c('l',
                                  '>{\\raggedright}p{1.5in}',
                                  '>{\\raggedright}p{2.6in}',
                                  '>{\\raggedright}p{1in}',
                                  '>{\\raggedright}p{1in}')          
        
        print(Fleet11_filter.table, 
              include.rownames=FALSE, 
              caption.placement="top",
              sanitize.text.function = function(x){x})

   #Fleet 11 aic
         Fleet11_aic.table = xtable(Fleet11_aic,
                              caption = c("AIC values for each model in the
                                          recreational private mode dockside sample 
                                          index."),
                              label='tab:Fleet11_SCBSurvey_aic')
        
        
        print(Fleet11_aic.table, 
              include.rownames=FALSE, 
              caption.placement="top",
              sanitize.text.function = function(x){x})

   #Fleet 11 index
         Fleet11_index.table = xtable(Fleet11_index,
                              caption = c("The recreational private mode 
                                            dockside sample index."),
                              digits=4,
                              label='tab:Fleet11_SCBSurvey_index')
        
        
        print(Fleet11_index.table, 
              include.rownames=FALSE, 
              caption.placement="top",
              sanitize.text.function = function(x){x})
```







\FloatBarrier
<!-- ********************************************************************** -->
<!--  ************Fishery dependent biological sampling TABLES************* -->
<!-- ********************************************************************** -->

\FloatBarrier




<!-- ====================================================================== --> 
<!-- ******************START BIOLOGICAL DATA TABLES************************ --> 
<!-- ====================================================================== --> 




<!-- ********************************************************************** -->
<!-- ***********************Weight-length TABLES*************************** --> 
<!-- ********************************************************************** -->




<!-- ********************************************************************** --> 
<!-- ******************Maturity and Fecundity TABLES*********************** --> 
<!-- ********************************************************************** --> 





<!-- ********************************************************************** -->
<!-- **********************Age Structure TABLES**************************** --> 
<!-- ********************************************************************** -->






\FloatBarrier

<!-- ====================================================================== -->
<!-- ********************BASE-CASE MODEL 1 TABLES************************** --> 
<!-- **REPEAT THIS SECTION AND EDIT AS NEEDED IF YOU HAVE MULTIPLE MODELS** --> 
<!-- ====================================================================== -->



<!-- ***********MODEL 1 PARAMETERS***************************************** --> 
\begin{landscape}
```{r, results='asis'}
       # If you use this for more than one model = change mod1 to mod2 or mod3
    mod_params = mod1$parameters[-c(grep('Recr',mod1$parameters$Label),
                                         grep('Impl',mod1$parameters$Label)),
                                      (names(mod1$parameters) %in%
                                         c("Num","Label","Value","Phase","Min",
                                           "Max","Status","Parm_StDev",
                                           "Pr_type","Prior","Pr_SD"))]  

    # Combine bounds into one column
    mod_params$Min = paste('(', mod_params$Min, ', ', mod_params$Max, ')', sep='')
    
    
    # Combine prior info to one column
    #mod_params$Pr_type = gsub('No_prior', 'None', mod_params$Pr_type)
    mod_params$Pr_type = ifelse(mod_params$Pr_type == 'No_prior' , 'None',
                                paste(mod_params$Pr_type,' (', mod_params$Prior, 
                                      ', ', mod_params$Pr_SD, ')', sep = ''))
    
    # Remove the max, prior and prior sd columns
    drops = c('Max', 'Prior', 'Pr_SD')
    mod_params = mod_params[, !(names(mod_params) %in% drops)]
    
    # Add column names
    colnames(mod_params) = c('No.',
                             'Parameter',
                             'Value',
                             'Phase',
                             'Bounds',
                             'Status',
                             'SD',
                             'Prior (Exp.Val, SD) ')

    # Model 1 model parameters
    mod_params.table = xtable(mod_params, 
                              caption=c(paste('List of parameters used in
                                              the base model, including estimated 
                                              values and standard deviations (SD), 
                                              bounds (minimum and maximum), 
                                              estimation phase (negative values indicate
                                              not estimated), status (indicates if 
                                              parameters are near bounds, and prior type
                                              information (mean, SD).'
                                              , sep='')), 
                              label='tab:model_params',
                              digits = c(0,0,0,3,0,3,0,3,0))  

    # Add alignment  
    align(mod_params.table) = c('lrlrrcccl')
        
 
    # Add "continued on next page"" footnote   
    addtorow          <- list()
    addtorow$pos      <- list()
    addtorow$pos[[1]] <- c(0)
    addtorow$command  <- c(paste("\\hline \n",
                                 "\\endhead \n",
                                 "\\hline \n",
                                 "\\multicolumn{3}{l}",
                                 "{\\footnotesize Continued on next page} \n",
                                 "\\endfoot \n",
                                 "\\endlastfoot \n",sep=""))



    # Print Model 1 parameters
    print(mod_params.table, 
          include.rownames = FALSE,
          caption.placement = 'top',
          tabular.environment = 'longtable',
          floating = FALSE,
          add.to.row = addtorow)
```
\end{landscape}
<!-- ---------------------------------------------------------------------- -->

\FloatBarrier

\newpage

<!-- ***********Indices of abundance summary table************************* -->
\begin{landscape}
```{r, results = 'asis'}
    Index_summary = read.csv('./txt_files/Index_summary.csv')
      colnames(Index_summary) = c('Fleet',
                                  'Years',	
                                  'Name',
                                  'Fishery ind.',
                                  'Filtering',
                                  'Method',	
                                  'Endorsed')

   # Index of abundance summary, create table   
     Index_summary.table = xtable(Index_summary, 
                                  caption = c('Summary of the biomass/abundance
                                              time series used in the stock
                                              assessment.'),
                                 label = 'tab:Index_summary',
                                 digits = 0)    
    # Add alignment  
      align(Index_summary.table) = c('l',
                                    '>{\\centering}p{.3in}',
                                     '>{\\centering}p{1in}',
                                     '>{\\centering}p{2.5in}',
                                     '>{\\centering}p{.3in}', 
                                     '>{\\centering}p{2in}',
                                     '>{\\centering}p{1.2in}',
                                     '>{\\centering}p{.5in}')  
    
    # Print index summary table
      print(Index_summary.table, 
            include.rownames=FALSE, 
            caption.placement='top',
            sanitize.text.function = function(x){x})
```
\end{landscape}
<!-- ---------------------------------------------------------------------- -->

\newpage

<!-- ***********JITTER TABLE*********************************************** --> 
```{r, results = 'asis'}
    # Replace values in file and read in - values for all models in 1 table  
      jitter = read.csv('./txt_files/JitterTable.csv')  

    # Create model 1 jitter table
    jitter.table = xtable(jitter, 
                          caption = c('Results from 100 jitters from each of 
                                      the three models.'),
                          label = 'tab:jitter')
    
    # Print jitter table (all models)    
    print(jitter.table, 
          include.rownames = FALSE, 
          caption.placement = 'top')
```
<!-- ---------------------------------------------------------------------- -->

\FloatBarrier

\newpage
<!-- ***********MODEL 1 SENSITIVITY TABLE(S)******************************* --> 
```{r, results = 'asis'}
    
    # Read in/organize sensitivity file, change column names, caption
    Sens_model1 = read.csv('./txt_files/Sensitivities_model1.csv')
    colnames(Sens_model1) = c('Label', 
                              'Base (Francis weights)', 
                              'Harmonic mean weights',
                              'Drop index', 
                              'Drop ages', 
                              'Down-weight lengths',
                              'Free size Age0', 
                              'Free CV Amin', 
                              'External growth')

    # Create sensitivities table
    Sens_model1.table = xtable(Sens_model1, 
                               caption = c('Sensitivity of the base model 
                                          to dropping or down-weighting data 
                                          sources and alternative assumptions 
                                          about growth.'),
                               label = 'tab:Sensitivity_model1', digits = 2)    
  
    # Add alignment - this uses centered aligment of .6 inches for all columns 2+,
    # You can change this easily to have variable columns width after you know how many
    # colunns your final table has
    align(Sens_model1.table) = c('l','l', rep('>{\\centering}p{.6in}', dim(Sens_model1)[2]-1))
                    #             '>{\\centering}p{.6in}',
                    #             '>{\\centering}p{.5in}',
                    #             '>{\\centering}p{.5in}',
                    #             '>{\\centering}p{.6in}', 
                    #             '>{\\centering}p{.5in}',
                    #             '>{\\centering}p{.6in}',
                    #             '>{\\centering}p{.6in}',
                    #             '>{\\centering}p{.6in}')  

    # Print model 1 sensitivity table
    print(Sens_model1.table, 
          include.rownames = FALSE,             
          caption.placement = 'top',
          floating.environment = 'sidewaystable',
          scalebox = .9)

```
<!-- ---------------------------------------------------------------------- -->


\newpage
<!-- ***********MODEL 1 REFERENCE POINTS TIME SERIES TABLE***************** --> 
```{r}
   
    
    # Total biomass, extract and subset
    Bio_all = mod1$sprseries[, c('Yr', 'Bio_all')]
    Bio_allyrs = subset(Bio_all, Yr > (Dat_start_mod1 - 1) & Yr < (LastYR + 1))

  
  
    # Spawning biomass, extract and subset, and turn into scientific notation
    SpawningB = mod1$derived_quants[grep('SPB', mod1$derived_quants$Label), ]
    SpawningB = SpawningB[c(-1, -2), ]
    SpawningByrs = SpawningB[SpawningB$Label >= paste('SPB_', Dat_start_mod1, sep='') &  
                             SpawningB$Label <= paste('SPB_', LastYR, sep=''), ] 
        
        SpawningB_units = ''
        if(mean(SpawningByrs$Value) > 1000000){
            SpawningB_units <- "million"
            SpawningByrs$Value <- SpawningByrs$Value/1000000
         }

    
    # Depletion, extract, rename and subset
    Depl_years = as.data.frame(seq(Dat_start_mod1, LastYR, 1))
    colnames(Depl_years) = 'Yr'
    Depl_years$Depl = 0
    Depletion = mod1$derived_quants[grep('Bratio', mod1$derived_quants$Label), ]
    Depletionyrs = Depletion[Depletion$Label >= paste0('Bratio_', Dat_start_mod1) &  
                             Depletion$Label <= paste0('Bratio_', LastYR), ]
    
    Depletionyrs$Yr = Depletionyrs$Label1 = substr(Depletionyrs$Label,
                                                     (nchar(Depletionyrs$Label) + 1) - 4, 
                                                      nchar(Depletionyrs$Label))
   # Make sure depletion is numeric and merge ...
   Depletionyrs$Yr = as.numeric(Depletionyrs$Yr)
   Depleteyrs = merge(Depl_years, Depletionyrs, all.x=T, all.y=T, by.x='Yr', by.y='Yr')
   Depleteyrs[is.na(Depleteyrs)] <- 0
   Depleteyrs$total = Depleteyrs$Depl + Depleteyrs$Value
    
   # Recruits, extract and subset
   Recruit = mod1$derived_quants[grep('Recr', mod1$derived_quants$Label), ]
   Recruit = Recruit[c(-1, -2), ]
   Recruityrs = Recruit[Recruit$Label >= paste('Recr_', Dat_start_mod1, sep='') &  
                        Recruit$Label <= paste('Recr_', LastYR, sep=''), ]  
    
    
   # Landings/total catch, extract and subset years
   Landings = mod1$sprseries[ , c('Yr','Dead_Catch_B')]
   Landingsyrs = subset(Landings, Yr > (Dat_start_mod1 - 1) & Yr < (LastYR + 1))
    
  
    
   # Relatvie exploitation rate, extract, subset and merge
   Exploit = mod1$derived_quants[grep('F', mod1$derived_quants$Label), ]
   Exploit = Exploit[c(-1, -2), ]
   Exploityrs = Exploit[Exploit$Label >= paste('F_', Dat_start_mod1, sep = '') &  
                        Exploit$Label <= paste('F_', LastYR, sep = ''), ]  
   Exploityrs$Yr = Exploityrs$Label1 = substr(Exploityrs$Label, 
                                               (nchar(Exploityrs$Label) + 1) - 4,
                                                nchar(Exploityrs$Label))
   Exploityrs$Yr = as.numeric(Exploityrs$Yr)
   Exploited = merge(Depl_years, Exploityrs, all.x=T, all.y=T, by.x='Yr', by.y='Yr')
   Exploited[is.na(Exploited)] <- 0
   Exploited$total = Exploited$Depl + Exploited$Value
    
  # SPR, extract and subset years
  SPR = mod1$sprseries[, c('Yr', 'SPR')]
  SPRyrs = subset(SPR, Yr > (Dat_start_mod1 - 1) & Yr < (LastYR + 1))
  
  
  # Bind all the columns together for the table
  Timeseries = as.data.frame(cbind(seq(Dat_start_mod1, LastYR, 1), 
                                       Bio_allyrs$Bio_all, 
                                       SpawningByrs$Value,
                                       Depleteyrs$total,
                                       Recruityrs$Value, 
                                       Landingsyrs$Dead_Catch_B, 
                                       Exploited$total,
                                       SPRyrs$SPR))

 # Add colulmn names    
 colnames(Timeseries)=c('Yr', 
                        'Total biomass (mt)', 
                        paste0('Spawning biomass', SpawningB_units, ' (mt)'),
                        'Depletion', 
                        'Age-0 recruits', 
                        'Total catch (mt)',
                        'Relative exploitation rate', 
                        'SPR')
 
 # Make year a factor so you don't have a decimal   
 Timeseries$Yr = as.factor(Timeseries$Yr)
    
 # Remove 2015 values for last three columns since year isn't complete
 Timeseries[nrow(Timeseries), c((ncol(Timeseries) - 2):ncol(Timeseries))] <- NA
```

```{r, results='asis'}
    # Create the time series table
    Timeseries.table = xtable(Timeseries, 
                              caption = c('Time-series of population estimates 
                                        from the base-case model.'),
                              label='tab:Timeseries_mod1',
                              digits = c(0,0,0,0,2,0,0,2,2))   

    # Add alignment
    align(Timeseries.table) = c('l',
                                'c',
                                '>{\\centering}p{.6in}',
                                '>{\\centering}p{.6in}',
                                '>{\\centering}p{.6in}',
                                '>{\\centering}p{.6in}',
                                '>{\\centering}p{.8in}',
                                '>{\\centering}p{.8in}',
                                'c')

    # Print timeseries of population estimates table
    print(Timeseries.table, 
          include.rownames = FALSE, 
          caption.placement = 'top',
          tabular.environment = 'longtable', 
          align=TRUE, 
          floating = FALSE, 
          add.to.row = list(pos = list(0), 
          command = '\\hline \\endhead '))
```
<!-- ---------------------------------------------------------------------- -->

\FloatBarrier

<!-- ***********MODEL 1 HARVEST PROJECTIONS TABLE************************** --> 
\newpage
```{r, results = 'asis'}
    # Pull OFL contribution and subset years
    OFLcatch = mod1$derived_quants[grep('OFLCatch', mod1$derived_quants$Label), ]
    OFLcatchyrs = OFLcatch[OFLcatch$Label >= paste('OFLCatch_', Project_firstyr, sep = '') &
                           OFLcatch$Label <= paste('OFLCatch_', Project_lastyr, sep = ''), ]

    # Pull forecasted landings and subset years
    ForecastC = mod1$timeseries[, grepl('Yr|retain[(]B[)]', names(mod1$timeseries))]
    ForecastC$total = rowSums(ForecastC[, -1])
    ForecastCyrs = subset(ForecastC, Yr > (Project_firstyr - 1) & Yr < (Project_lastyr + 1))

    # Pull Age 5+ biomass and subset years
    Age5biomass = mod1$timeseries[, c('Yr', 'Bio_smry')]
    Age5biomassyrs = subset(Age5biomass, Yr > (Project_firstyr - 1) & Yr < (Project_lastyr + 1))


    # Pull spawning biomass and subset years
    SpawningB = mod1$derived_quants[grep('SPB', mod1$derived_quants$Label), ]
    SpawningB = SpawningB[c(-1, -2), ]
    SpawningByrs = SpawningB[SpawningB$Label >= paste('SPB_', Project_firstyr, sep = '') &
                             SpawningB$Label <= paste('SPB_', Project_lastyr, sep = ''), ]

    # Pull depletion and subset years
    Depletion = mod1$derived_quants[grep('Bratio', mod1$derived_quants$Label), ]
    Depletion = Depletion[c(-1, -2), ]
    Depletionyrs = Depletion[Depletion$Label >= paste('Bratio_', Project_firstyr, sep = '') &
                             Depletion$Label <= paste('Bratio_', Project_lastyr, sep = ''), ]

    # Combine the data for the forecast table
    Forecast_mod1 = as.data.frame(cbind(seq(Project_firstyr, Project_lastyr, 1),
                                        OFLcatchyrs$Value,
                                        ForecastCyrs$total,
                                        Age5biomassyrs$Bio_smry,
                                        SpawningByrs$Value,
                                        Depletionyrs$Value))
    # Add column names
    colnames(Forecast_mod1)=c('Yr',
                           'OFL contriubtion (mt)',
                           'ACL landings (mt)',
                           'Age 5+ biomass (mt)',
                           'Spawning Biomass (mt)',
                           'Depletion')

    # Make sure year is a factor, so you don't get decimals
    Forecast_mod1$Yr = as.factor(Forecast_mod1$Yr)

    # Create the forecast table
    Forecast_mod1.table = xtable(Forecast_mod1,
                              caption = c('Projection of potential
                                        OFL, spawning biomass, and depletion for the
                                        base case model.'),
                              label = 'tab:Forecast_mod1', digits = 2)
    # Add alignment
    align(Forecast_mod1.table) = c('l',
                                   'c',
                                   '>{\\centering}p{1in}',
                                   '>{\\centering}p{1in}',
                                   '>{\\centering}p{1in}',
                                   '>{\\centering}p{1in}',
                                   '>{\\centering}p{1in}')

    # Print model 1 forecast table
    print(Forecast_mod1.table,
          include.rownames = FALSE,
          caption.placement = 'top')
```
<!-- ---------------------------------------------------------------------- -->
\FloatBarrier


<!-- ********************************************************************** -->
<!-- ************************MODEL 2 TABLES******************************** --> 
<!-- ********************************************************************** -->



<!-- ********************************************************************** -->
<!-- ************************MODEL 3 TABLES******************************** --> 
<!-- ********************************************************************** -->



<!-- ====================================================================== --> 
<!-- *************************          *********************************** --> 
<!-- *************************END TABLES*********************************** --> 
<!-- *************************          *********************************** --> 
<!-- ====================================================================== --> 






<!-- ====================================================================== -->
<!-- **************************             ******************************* --> 
<!-- **************************BEGIN FIGURES******************************* --> 
<!-- **************************             ******************************* -->
<!-- ====================================================================== -->
\FloatBarrier

\newpage


#Figures

<!-- ====================================================================== --> 
<!-- *********************INTRODUCTION FIGURES***************************** --> 
<!-- ====================================================================== --> 

![Map showing the state boundary lines for management of the recreational fishing fleets.  CRFS Districts 1-6 in California are presented as well as the WDFW Recreational Management Areas in Washington.  Florence, OR is shown as a potential location of model stratification. \label{fig:boundary_map}](Figures/boundary_map.png)







<!-- ********************************************************************** --> 
<!-- *************************Data FIGURES********************************* --> 
<!-- ********************************************************************** -->

![Summary of data sources used in the `r mod1_label`. \label{fig:data_plot}](r4ss/plots_mod1/data_plot.png)






\FloatBarrier

<!-- ********************************************************************** --> 
<!-- ******************Commercial landings FIGURES************************* --> 
<!-- *either read in data to create figure or load in figures from analyst* --> 
<!-- *******************one example of each here*************************** -->





\FloatBarrier

<!-- ********************************************************************** --> 
<!-- *****************Commercial Discards FIGURES************************** --> 
<!-- ********************************************************************** -->






<!-- ********************************************************************** -->
<!-- ************Recreational Landings and Discards FIGURES**************** --> 
<!-- ********************************************************************** -->







\FloatBarrier

<!-- ********************************************************************** -->
<!-- ****************Oregon commercial logbook FIGURES********************* -->
<!-- ********************************************************************** --> 




\FloatBarrier

<!-- ********************************************************************** -->
<!-- ***************Recreational dockside survey FIGURES********************--> 
<!-- ********************************************************************** -->









\FloatBarrier

<!-- ********************************************************************** -->
<!-- *************Recreational onboard observer FIGURES******************** --> 
<!-- ********************************************************************** -->








\FloatBarrier

<!-- ====================================================================== -->
<!-- *****************                             ************************ -->
<!-- *****************START BIOLOGICAL DATA FIGURES************************ --> 
<!-- *****************                            ************************ -->
<!-- ====================================================================== -->



<!-- ********************************************************************** -->
<!-- ****************Length and Age Composition FIGURES******************** --> 
<!-- ********************************************************************** -->


<!-- ***********MODEL 1**************************************************** -->
 
```{r, results='asis'}
    # Plot all of the timeseries plots
      for(i in 1:5) { # was previously 1:10 but caused error due to no 10th figure
       
        # find matches to multi-page plots
        page_test = sapply(multi_page_fig, grepl, LenComp_mod1$label[i])
       
       # if the plot is page2+ of a series, add the extra caption
        if(TRUE %in% page_test) {
         cat('\n![](', LenComp_mod1[i, path_col], ')', sep='')
      
         cat('\\begin{center} \n
              Figure continued from previous page \n
             \\end{center}',sep='')
       
       } else {

        cat('\n![', LenComp_mod1[i,caption_col], ' \\label{fig:mod1_', i, '_', LenComp_mod1[i, label_col], '}](', LenComp_mod1[i, path_col], ')\n', sep='')
 } }
```







\FloatBarrier

<!--RESEARCH Age and lengh composition figures-->




<!-- ********************************************************************** -->
<!-- *****************Maturity and Fecundity FIGURES*********************** --> 
<!-- ********************************************************************** -->







<!-- ********************************************************************** -->
<!-- **********************Age structure FIGURES*************************** --> 
<!-- ********************************************************************** -->








<!-- ********************************************************************** -->
<!-- ****************Aging Precision and Bias FIGURES********************** --> 
<!-- ********************************************************************** -->






<!-- ====================================================================== -->
<!-- ******************                           ************************* -->
<!-- ******************END BIOLOGICAL DATA FIGURES************************* --> 
<!-- ******************                           ************************* -->
<!-- ====================================================================== -->








<!-- ********************************************************************** -->
<!-- **********************Weight-Length FIGURES*************************** --> 
<!-- ********************************************************************** -->






\FloatBarrier

<!-- ********************************************************************** -->
<!-- ***********History of modelleing approaches FIGURES******************* --> 
<!-- ********************************************************************** -->





<!-- ********************************************************************** -->
<!-- ****************STAR PANEL Recommendations FIGURES******************** --> 
<!-- ********************************************************************** -->





<!-- ********************************************************************** -->
<!-- ****************Model description section FIGURES********************* --> 
<!-- ********************************************************************** -->




\FloatBarrier

<!-- ====================================================================== -->
<!-- *********************BASE MODEL FIGURES******************************* -->
<!-- ====================================================================== -->

<!-- ***********MODEL 1 BASE MODEL FIGURES********************************* --> 


\FloatBarrier


<!-- ***********MODEL 2 BASE MODEL FIGURES********************************* --> 


<!-- ***********MODEL 3 BASE MODEL FIGURES********************************* --> 






<!-- ********************************************************************** -->
<!-- ****************Uncertainty and Sensitivity FIGURES******************* -->
<!-- ********************************************************************** -->

<!-- ***********MODEL 1 Uncertainty and Sensitivity FIGURES**************** --> 







<!-- ********************************************************************** -->
<!-- *****************Retrospective analysis FIGURES*********************** -->
<!-- ********************************************************************** -->

<!-- ***********MODEL 1 Retrospective analysis FIGURE********************** --> 




\FloatBarrier





<!-- ********************************************************************** -->
<!-- ******************Likelihood profile FIGURES************************** --> 
<!-- ********************************************************************** -->

<!-- ***********R0 Likelihood profile FIGURES****************************** --> 


<!-- ***********M Likelihood profile FIGURES******************************* -->



<!-- ***********h Likelihood profile FIGURES******************************* -->


\FloatBarrier

<!-- ***********Post-STAR M Likelihood profile FIGURES********************* -->







<!-- ********************************************************************** -->
<!-- *********************REFERENCE POINTS FIGURES************************* --> 
<!-- ********************************************************************** -->

<!-- ***********MODEL 1 REFERENCE POINTS FIGURES*************************** --> 



\FloatBarrier
<!-- ***********MODEL 2 REFERENCE POINTS FIGURES  -- IF NEEDED ************ --> 


<!-- ***********MODEL 3 REFERENCE POINTS FIGURES  -- IF NEEDED ************ --> 






<!-- ********************************************************************** --> 
<!-- *************************FORECAST FIGURES***************************** --> 
<!-- ********************************************************************** --> 

\newpage




<!-- ====================================================================== -->
<!-- ***************************SS FILES*********************************** -->
<!--*****SS APPENDICES INCLUDED AS A CHILD DOCUMENT TO REMOVE CLUTTER****** -->
<!-- ====================================================================== -->

<!-- Uncomment the following lines to include the appendices - exlude to save runtime -->
<!--  ```{r child='SS_file_appendices.rmd'}
``` --> 

<!-- ====================================================================== -->
<!-- **********REFERENCES - WILL APPEAR AFTER APPENDICES******************* -->
<!-- ====================================================================== -->
\color{black}

#References{-}
\renewcommand{\thepage}{}

<!-- ********************END OF THE DOCUMENT******************************* -->